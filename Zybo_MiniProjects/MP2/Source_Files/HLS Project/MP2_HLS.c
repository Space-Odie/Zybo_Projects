//Includes
#include <stdio.h>
#include <math.h>

#define level 	.5
#define row		25
#define col		25
#define r 		27
#define c		27
#define w		.5	//scale factor
#define d_col	579	//Count from Compression

int img[25][25] = {
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},
 {0,     255,     20,     230,     40,     210,     60,     190,     80,     170,     110,     150,     130,     130,     150,    110,     170,     90,     190,     80,     210,     70,     230, 0 , 255},
 {255,     0,     230,     20,     210,     40,     190,     60,     170,     80,     150,     110,     130,     130,     110,     150,     90,     170,     70,     190,     50,     210,     30, 255, 0},

};

 int Compressed_Image[625][2] = {
 {255, 1}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1}, {50, 1}, {210, 1}, {30, 1},
 {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1}, {80, 1}, {210, 1}, {70, 1},
 {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1}, {50, 1}, {210, 1},
 {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1}, {80, 1}, {210, 1}, {70, 1},
 {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1}, {50, 1}, {210, 1},
 {30, 1}, {255, 1}, {0, 1}, {255, 1}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1}, {50, 1},
 {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1}, {80, 1}, {210, 1},
 {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1}, {50, 1},
 {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1}, {80, 1}, {210, 1},
 {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1}, {50, 1},
 {210, 1}, {30, 1}, {255, 1}, {0, 1}, {255, 1}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1},
 {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1}, {80, 1},
 {210, 1}, {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1},
 {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1}, {80, 1},
 {210, 1}, {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1}, {190, 1},
 {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 1}, {255, 1}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1},
 {190, 1}, {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1},
 {80, 1}, {210, 1}, {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1},
 {190, 1}, {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1}, {190, 1},
 {80, 1}, {210, 1}, {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1}, {70, 1},
 {190, 1}, {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 1}, {255, 1}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1},
 {70, 1}, {190, 1}, {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1},
 {190, 1}, {80, 1}, {210, 1}, {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1},
 {70, 1}, {190, 1}, {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 2}, {255, 1}, {20, 1}, {230, 1}, {40, 1}, {210, 1}, {60, 1}, {190, 1}, {80, 1}, {170, 1}, {110, 1}, {150, 1}, {130, 2}, {150, 1}, {110, 1}, {170, 1}, {90, 1},
 {190, 1}, {80, 1}, {210, 1}, {70, 1}, {230, 1}, {0, 1}, {255, 2}, {0, 1}, {230, 1}, {20, 1}, {210, 1}, {40, 1}, {190, 1}, {60, 1}, {170, 1}, {80, 1}, {150, 1}, {110, 1}, {130, 2}, {110, 1}, {150, 1}, {90, 1}, {170, 1},
 {70, 1}, {190, 1}, {50, 1}, {210, 1}, {30, 1}, {255, 1}, {0, 1}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0},
 {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}
 };


int b[25][25]; //For Binary
int avg[25][25]; //For Average
int zeropad[27][27]; //For zero pad
int inv[25][25];
int sca[25][25];
int comp_img [625][2];
int decom_img[25][25];

void I2B(int img[row][col], int b[row][col], int zeropad[r][c], int avg[row][col], int inv[row][col], int sca[row][col], int comp_img[625][2], int decom_img[row][col]){
	//void I2B(int img[row][col], int b[row][col]){
    int threshold = 256*level;                 //calculate threshold
    ROW_I2B: for(int i = 0; i < row; i++){
        COL_I2B: for(int j = 0; j < col; j++){
            if (img[i][j] < threshold){
                b[i][j] = 0;
            } else {
                b[i][j] = 1;
            }
        }
    }
    //void ZeroPad(int img[row][col], int zeropad[r][c], avg[r][c]){
    ROW_ZP: for(int a = 0; a < r; a++) {
		COLUMN_ZP: for(int b = 0; b < c; b++){
			if (a == 0){
			   zeropad[a][b] = 0;
			}
			else if (a == r-1){
				zeropad[a][b] = 0;
			}
			else if (b == 0){
				zeropad[a][b] = 0;
			}
			else if (b == c-1){
				zeropad[a][b] = 0;
			} else {
				zeropad[a][b] = img[a-1][b-1];

			}
		}
    }
    //Average in same Function
    ROW_AVG: for(int d = 0; d < r; d++) {
		COLUMN_AVG: for(int e = 0; e < c; e++){

				int m = d + 1;
				int n = e + 1;

				avg[d][e] = (zeropad[m-1][n] + zeropad[m+1][n] + zeropad[m][n]
							+ zeropad[m-1][n-1] + zeropad[m+1][n-1] + zeropad[m][n-1]
							+ zeropad[m-1][n+1] + zeropad[m+1][n+1] + zeropad[m][n+1]) / 9;
		}
	}
    //void Inv(int img[row][col], int inv[row][col]){
	ROW_INV: for(int i_inv = 0; i_inv < row; i_inv++){
		COL_INV: for(int j_inv = 0; j_inv < col; j_inv++){
			inv[i_inv][j_inv] = 255 - img[i_inv][j_inv];
		}
	}
	//void Scale(int img[row][col], int sca[row][col]){
	ROW_SCALE: for(int i_scale = 0; i_scale < row; i_scale++){
		COL_SCALE: for(int j_scale = 0; j_scale < col; j_scale++){
			sca[i_scale][j_scale] = img[i_scale][j_scale] * w;
		}
	}

	//int Compression(int img[row][col], int comp_img[row][col]){
	int num = 1 ;
	int count = 0;
	ROW_CMPRS: for(int i_cmprs = 0; i_cmprs < row; i_cmprs++){
		COL_CMPRS: for(int j_cmprs = 0; j_cmprs < col; j_cmprs++){

			if (j_cmprs == (col-1) && (img[i_cmprs][j_cmprs] == img[i_cmprs+1][j_cmprs-(col-1)])){    //if position is on last col of row - Check next row - first col
				num = num + 1;                                          // add one to num
			}
			else if (img[i_cmprs][j_cmprs] ==  img[i_cmprs][j_cmprs+1]){                        //if position is anywhere else than last col, check next col.
				num = num + 1;
			}
			else{                                                       //if the next item is not the same, store the value into an array

				comp_img[count][0] = img[i_cmprs][j_cmprs];                         //store the intensity value into position 0
				comp_img[count][1] = num;                               //store the count into position 1
				count = count + 1;                                      //increase array position
				num = 1;                                                //reset num counter
				}
		}

	}

    //void Decompression(int img[row][col], int comp_img[row][col], int decom_img[row][col]){
	int im_row = 0;
	int im_col = 0;
	int value;
	int Decomp_count;

	DECOMPRESS: for(int p = 0; p < d_col; p++){         		//Go through each pixel in decompressed image array
		value = Compressed_Image[p][0];             //retrieve the value
		Decomp_count = Compressed_Image[p][1];             //retrieve the count of the values
	   DECOMPRESS_ASSIGN: for (int z = 0; z < Decomp_count; z++){         	//Assign the Value - Count - Amount of times while updating the position.
			decom_img[im_row][im_col] = value;    	//Assign Value

			//Move to Next Position
			if (im_col % 24 == 0){          //IF at end of row
				im_row = im_row + 1;        //Move to next row
				im_col = im_col - 24;       //move to col 0
			} else {                        //if not at end of row
				im_col = im_col + 1;        //update position to move to the next position
			}
	   }
	}

}



